<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  
  <meta name="theme-color" content="#c62828">
  
  <title>Hemo Heroes - Progressive Web App!!!</title>
  
  <link rel="manifest" href="./manifest.json">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  
  <!-- CSS  -->
  <link href="./assets/css/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="./assets/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body onload="whatMenu()">
  
  <nav class="navbar-wrapper grey lighten-5">
    <a href="#" data-target="mobile-menu" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    <ul id="dropdown1" class="dropdown-content" z-index="9999">
      <li><a onclick="changePage('wantDonate')" href="#content">Quero ser um Doador</a></li>
      <li class="divider"></li>
      <li><a onclick="changePage('iHospital')" href="#content">Sou um HemoCentro</a></li>
    </ul>
    <div class="nav-wrapper container" id="menuLogout">
      <a onclick="changePage('home')" style="cursor: pointer;" class="brand-logo"><img src="./assets/images/hemoheroes-logo.png" alt="" class="responsive-img"> </a>    
      <ul class="right hide-on-med-and-down">
        <li ><a href="#info" onclick="changePage('home')">Como funciona</a></li>
        <li ><a onclick="changePage('about')" href="#content">Sobre</a></li>
        <li ><a onclick="changePage('myPerfil')" href="#perfil">Meu Perfil</a></li>
        <li ><a onclick="changePage('requireDonate')" href="#content" id="isHospital">Solicitar doação</a></li>
        <li ><a onclick="changePage('solicitacao')" href="#" id="isUser">Solicitações</a></li>
        <li ><a onclick="logout()" href="#content">Logout</a></li>
      </ul>
    </div>
    <div class="nav-wrapper container" id="menuLogin">
      <a onclick="changePage('home')" style="cursor: pointer;" class="brand-logo"><img src="./assets/images/hemoheroes-logo.png" alt="" class="responsive-img"> </a>    
      <ul class="right hide-on-med-and-down">
        <li ><a href="#info" onclick="changePage('home')">Como funciona</a></li>
        <li ><a class="dropdown-button" data-target="dropdown1">Onde doar<i class="material-icons right">arrow_drop_down</i></a></li>
        <li ><a onclick="changePage('canDonate')" href="#content">Quem pode doar</a></li>
        <li ><a onclick="changePage('about')" href="#content">Sobre</a></li>
        <li ><a onclick="changePage('login')" href="#content">Login</a></li>
      </ul>
    </div>
  </nav>
  
  
  
  <ul id="slide-out" class="sidenav">
    <li class="no-padding">
      <ul class="collapsible collapsible-accordion">
        <li>
          <a class="collapsible-header">Dropdown<i class="material-icons">arrow_drop_down</i></a>
          <div class="collapsible-body">
            <ul>
              <li><a class="sidenav-close" onclick="changePage('wantDonate')" href="#content">Quero ser um Doador</a></li>
              <li><a class="sidenav-close" onclick="changePage('iHospital')" href="#content">Sou um HemoCentro</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </li>
  </ul>
  
  <ul class="sidenav" id="mobile-menu"></ul>
  
  <div id="content" style="display: none;" class="section">
    
  </div>
  
  <div id="home" style="display: none;">
    <div id="index-banner" class="parallax-container">
      <div class="section">
        <div class="container">
          <h3 style="
          color: #333333;
          font-size: 1.7em;
          overflow: visible;
          font-weight: 600;
          text-shadow: 0px 1px 25px white;
          ">
          Receba notificações de quando e onde doar sangue
          Faça parte dos doadores voluntários do HemoHeroes
        </h3>
        <div class="row center">
          <button onclick="changePage('wantDonate')" class="btn-large waves-effect waves-light red darken-1 pulse">Quero me cadastrar!</button>
        </div>
      </div>
    </div>
    <div class="parallax"><img src="./assets/images/hospital.jpg" alt="hospital"></div>
  </div>
  
  
  <div class="container">
    <div id="info" class="section">
      
      <!--   Icon Section   -->
      <div class="row">
        <div class="col s12 m3">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">account_circle</i></h2>
            <h5 class="center">Você se cadastra no HemoHeroes</h5>
            <p class="light">
              <div class="row center button">
                <a href="#" onclick="changePage('wantDonate')" id="download-button" class="btn-large waves-effect waves-light red darken-1 ">Quero Doar <i class="material-icons pulse">favorite</i></a>
              </div>
            </p>
          </div>
        </div>
        
        <div class="col s12 m3">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">local_hospital</i></h2>
            <h5 class="center">O Banco de Sangue solicita a doação do seu tipo sanguíneo</h5>
            
            <!-- <p class="light">By utilizing elements and principles of Material Design, we were able to create a framework that incorporates components and animations that provide more feedback to users. Additionally, a single underlying responsive system across all platforms allow for a more unified user experience.</p> -->
          </div>
        </div>
        
        <div class="col s12 m3">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">notifications</i></h2>
            <h5 class="center">Você recebe a solicitação</h5>
            
            <!-- <p class="light">We have provided detailed documentation as well as specific code examples to help new users get started. We are also always open to feedback and can answer any questions a user may have about Materialize.</p> -->
          </div>
        </div>
        
        <div class="col s12 m3">
          <div class="icon-block">
            <h2 class="center brown-text"><i class="material-icons">tag_faces</i><i class="material-icons">favorite</i></h2>
            <h5 class="center">Atenda a solicitação comparecendo ao Banco de Sangue</h5>
            
            <!-- <p class="light">We have provided detailed documentation as well as specific code examples to help new users get started. We are also always open to feedback and can answer any questions a user may have about Materialize.</p> -->
          </div>
        </div>
      </div>
      
    </div>
  </div>
  
  
  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <!-- <h5 class="header col s12" style="font-size: 2em; font-weight: 550;">Vamos ver abaixo os hospitais parceiros!</h5> -->
        </div>
      </div>
    </div>
    <div class="parallax"><img src="./assets/images/blood-donators.jpg" alt="Unsplashed background img 2"></div>
  </div>
  
  <div class="container">
    <div class="section">
      
      <div class="row">
        <div class="col s12 center">
          <h3><i class="mdi-content-send brown-text"></i></h3>
          <h4>Hospitais Parceiros</h4>
          <p class="left-align light">
            <div id="googleMap" style="width:100%; height:430px;"></div>
          </p>
        </div>
      </div>
      
    </div>
  </div>
  
  <div class="parallax-container valign-wrapper">
    <div class="section no-pad-bot">
      <div class="container">
        <div class="row center">
          <!-- <h5 class="header col s12 light">A modern responsive front-end framework based on Material Design</h5> -->
        </div>
      </div>
    </div>
    <div class="parallax"><img src="./assets/images/donationhand.jpg" alt="Unsplashed background img 3"></div>
  </div>
</div>

<div class="container-fluid" id="chatBot">
  <div class="section">
    <div class="row">
      <div class="col s12 center">
        <h3><i class="mdi-content-send brown-text"></i></h3>
        <h4>Fale conosco!</h4>
        <p class="left-align light" align="center">
          <iframe width="100%" height="430" align="middle" src="https://console.dialogflow.com/api-client/demo/embedded/hemoheroes"></iframe>
        </p>
      </div>
    </div>
  </div>
</div>


<footer class="page-footer red darken-4">
  <div class="container">
    <div class="row">
      <div class="col l6 s12">
        <h5 class="white-text">Missão</h5>
        <p class="grey-text text-lighten-4">Nosso objetivo é salvar cada vez mais vidas captando novos doadores, disponibilizar uma nova ferramenta para os bancos de sangue e criando mais conforto aos usuários através de facilidades e transparência.</p>
      </div>
      <div class="col l3 s12">
        <h5 class="white-text">Links</h5>
        <ul>
          <li><a class="white-text" href="#!" onclick="changePage('wantDonate')">Quero ser um Doador</a></li>
          <li><a class="white-text" href="#!" onclick="changePage('iHospital')">Sou Hemocentro</a></li>
          <li><a class="white-text" href="#!" onclick="changePage('login')">Login</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="footer-copyright">
    <div class="container">
      Made by <a class="brown-text text-lighten-3" href="#">HemoHeroes</a>
    </div>
  </div>
</footer>

<script>
  function whatMenu () {
    var hasLogin = JSON.parse(window.localStorage.getItem("login")) || {};
    var whatPage = window.localStorage.getItem("currentPage");
    if (hasLogin.token) {
      
      document.getElementById("menuLogin").style="display: none";
      document.getElementById("menuLogout").style="";
      
      if (whatPage == "home" || whatPage == "about") {
        document.getElementById("chatBot").style="";
      } else {
        document.getElementById("chatBot").style="display: none";
      }
      
      
      if (hasLogin.checked == "banks"){
        document.getElementById("isHospital").style="";
        document.getElementById("isUser").style="display: none";
        document.getElementById("mobile-menu").innerHTML = `
        <li ><a class="sidenav-close" onclick="changePage('home')">Principal</a></li>
        <li ><a class="sidenav-close" href="#info">Como funciona</a></li>
        <li ><a class="sidenav-close" onclick="changePage('about')" href="#content">Sobre</a></li>
        <li ><a class="sidenav-close" onclick="changePage('myPerfil')" href="#perfil">Meu Perfil</a></li>
        <li ><a class="sidenav-close" onclick="changePage('requireDonate')" href="#content" >Solicitar doação</a></li>
        <li ><a class="sidenav-close" onclick="logout()" href="#">Logout</a></li>
        `;
      } else {
        document.getElementById("isHospital").style="display: none";
        document.getElementById("isUser").style="";
        document.getElementById("mobile-menu").innerHTML = `
        <li ><a class="sidenav-close" onclick="changePage('home')">Principal</a></li>
        <li ><a class="sidenav-close" href="#info">Como funciona</a></li>
        <li ><a class="sidenav-close" onclick="changePage('about')" href="#content">Sobre</a></li>
        <li ><a class="sidenav-close" onclick="changePage('myPerfil')" href="#perfil">Meu Perfil</a></li>
        <li ><a class="sidenav-close" onclick="changePage('solicitacao')" href="#">Solicitações</a></li>
        <li ><a class="sidenav-close" onclick="logout()" href="#">Logout</a></li>
        `;
      }
    } else {
      document.getElementById("menuLogout").style="display: none";
      document.getElementById("menuLogin").style="";
      document.getElementById("mobile-menu").innerHTML = 
      `
      <li ><a class="sidenav-close" onclick="changePage('home')">Principal</a></li>
      <li ><a class="sidenav-close" href="#info">Como funciona</a></li>
      <li ><a class="sidenav-close" onclick="changePage('wantDonate')" href="#content">Quero ser um Doador</a></li>
      <li ><a class="sidenav-close" onclick="changePage('iHospital')" href="#content">Sou um HemoCentro</a></li>
      <li ><a class="sidenav-close" onclick="changePage('canDonate')" href="#content">Quem pode doar</a></li>
      <li ><a class="sidenav-close" onclick="changePage('about')" href="#content">Sobre</a></li>
      <li ><a class="sidenav-close" onclick="changePage('login')" href="#content">Login</a></li>
      `;
    }
  };
  function logout () {
    changePage("home");
    window.localStorage.removeItem("login", null);
    window.location = "/"
  };
  
</script>

<script src="./assets/js/jquery.js"></script>
<script src="./assets/js/materialize.min.js"></script>
<script src="./assets/js/map.js"></script>
<script src="./assets/js/notifications.js"></script>
<script src="./assets/js/pages.js"></script>
<script src="./assets/js/http.js"></script>
<script src="./assets/js/init.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyCDgXVP7UODM2QZLil_Mm4MXPGxVmnbZIc" async defer></script>


<script src="./web-push.js"></script>
<script>
  
  if('serviceWorker' in navigator){
    navigator
    .serviceWorker
    .register('/sw.js')
    .then(
    registry => {
      console.log('Registry with success', registry.scope);
    }
    )
    .catch(
    err => {
      console.log('Ops, error the registry service worker')
    }
    )
  }
</script>

<script>
  function mTel(event) {
    let tel = this.value
    tel=tel.replace(/\D/g,"")
    tel=tel.replace(/^(\d)/,"($1")
    tel=tel.replace(/(.{3})(\d)/,"$1)$2")
    if(tel.length == 9) {
      tel=tel.replace(/(.{1})$/,"-$1")
    } else if (tel.length == 10) {
      tel=tel.replace(/(.{2})$/,"-$1")
    } else if (tel.length == 11) {
      tel=tel.replace(/(.{3})$/,"-$1")
    } else if (tel.length == 12) {
      tel=tel.replace(/(.{4})$/,"-$1")
    } else if (tel.length > 12) {
      tel=tel.replace(/(.{4})$/,"-$1")
    }
    this.value = tel;
  };
  function mCnpj(event) { 
    let cnpj = this.value;
    cnpj=cnpj.replace(/\D/g,"")
    cnpj=cnpj.replace(/^(\d{2})(\d)/,"$1.$2")
    cnpj=cnpj.replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")
    cnpj=cnpj.replace(/\.(\d{3})(\d)/,".$1/$2")
    cnpj=cnpj.replace(/(\d{4})(\d)/,"$1-$2")
    this.value = cnpj;
  };
  function maskDate(event)
  {
    let myDate = this.value;
    this.value = myDate.replace(/^(\d\d)(\d{2})(\d{0,4}).*/,"$1/$2/$3");
  };
</script>
</body>
</html>
